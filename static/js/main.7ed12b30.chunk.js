(this.webpackJsonpcarefhir=this.webpackJsonpcarefhir||[]).push([[0],{207:function(e,a,t){e.exports=t(429)},212:function(e,a,t){},405:function(e,a,t){},422:function(e,a,t){},423:function(e,a,t){},426:function(e,a,t){},427:function(e,a,t){},429:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(18),i=t.n(c);t(212),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=t(59),l=t(11),u=t(8),s=t(3),d=(t(405),t(19)),m=t.n(d),v=function(e){return Object.keys(e).reduce((function(a,t){if(e[t]&&""!==e[t])if(Array.isArray(e[t])){if(e[t].length>0){var n=JSON.stringify(e[t]);a.push("".concat(t,"=").concat(encodeURI(n)))}}else a.push("".concat(t,"=").concat(encodeURI(e[t])));return a}),[]).join("&")},p=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t){var n=v(t);return m.a.get("".concat(e,"/Patient?").concat(n),{headers:a})}},f=(t(422),t(423),function(e){var a=e.text,t=e.icon;return r.a.createElement("div",{className:"Info-wrapper"},r.a.createElement(s.i,{size:"37",name:t,type:"filled",appearance:"subtle"}),r.a.createElement(s.h,{appearance:"subtle",size:"m"},a))}),g=function(e){var a=e.data,t=void 0===a?{}:a,n=e.onClick;return r.a.createElement("div",{className:"PatientList"},t.entry&&0===t.entry.length?r.a.createElement(f,{text:"No data found",icon:"error"}):function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e,a){return r.a.createElement("div",{className:"PatientList-itemWrapper",key:a,onClick:function(a){return n(a,e.resource.id)}},r.a.createElement("div",{className:"PatientList-item-heading"},r.a.createElement(s.a,{appearance:"primary"},"".concat(e.resource.name[0].given[0].charAt(0)).concat(e.resource.name[0].family.charAt(0))),r.a.createElement(s.h,{size:"m"},"".concat(e.resource.name[0].given[0],", ").concat(e.resource.name[0].family)),r.a.createElement(s.b,{appearance:"secondary"},e.resource.id)),r.a.createElement("div",{className:"PatientList-item-info"},r.a.createElement(s.t,{appearance:"default"},"DOB: "),r.a.createElement(s.t,{appearance:"subtle"},e.resource.birthDate),r.a.createElement(s.t,{appearance:"default"},"Gender: "),r.a.createElement(s.t,{appearance:"subtle"},e.resource.gender)))}))}(t.entry))},h=function(){var e=Object(l.f)(),a=function(){var e=localStorage.getItem("fhirServer");return e||""},t=function(){var e=localStorage.getItem("serverHeaders");return e||"{}"},c=Object(n.useState)(a()),i=Object(u.a)(c,2),o=i[0],d=i[1],m=Object(n.useState)(t()),v=Object(u.a)(m,2),h=v[0],b=v[1],E=Object(n.useState)(!1),y=Object(u.a)(E,2),S=y[0],O=y[1],j=Object(n.useState)(!a()),N=Object(u.a)(j,2),w=N[0],x=N[1],z=Object(n.useState)(""),C=Object(u.a)(z,2),k=C[0],D=C[1],I=Object(n.useState)(""),P=Object(u.a)(I,2),H=P[0],J=P[1],Q=Object(n.useState)([]),A=Object(u.a)(Q,2),T=A[0],F=A[1],M=Object(n.useState)(!1),B=Object(u.a)(M,2),L=B[0],R=B[1],U=Object(n.useState)(""),Y=Object(u.a)(U,2),_=Y[0],V=Y[1],G=function(){if(!a())return null;x(!1),d(a())},W={open:w,onClose:G,backdrop:!1,dimension:"small"},q={onClose:G,icon:"pan_tool",heading:"FHIR Server",subHeading:"FHIR Server address"},X=function(e){d(e)};Object(n.useEffect)((function(){d(a()),b(t()),R(!1),a()&&p(o,JSON.parse(h))({name:k,gender:H}).then((function(e){F(e.data)})).catch((function(e){console.log(e),R(!0),V("Something went wrong")}))}),[localStorage.getItem("fhirServer"),w]);var $=function(e){D(e)},K=function(a,t){e.push("/patients/".concat(t))};return r.a.createElement("div",{className:"Home"},r.a.createElement(s.l,W,r.a.createElement(s.o,q),r.a.createElement(s.m,null,r.a.createElement(s.k,{style:{margin:"0px 0 4px"}},"Address"),r.a.createElement(s.j,{clearButton:!0,value:o,name:"input",placeholder:"Search",onChange:function(e){return X(e.target.value)},onClear:function(){return X("")}}),r.a.createElement(s.k,{style:{margin:"8px 0 4px"}},"Headers"),r.a.createElement(s.v,{name:"Textarea",placeholder:"Headers",rows:5,onChange:function(e){return function(e){try{JSON.parse(e),O(!1),b(e)}catch(a){O(!0),b(e)}}(e.target.value)},defaultValue:h,error:S})),r.a.createElement(s.n,null,r.a.createElement(s.d,{appearance:"primary",onClick:function(){return localStorage.setItem("fhirServer",o),localStorage.setItem("serverHeaders",h),x(!1),void F([])},disabled:!o||S},"Submit"))),r.a.createElement("div",{className:"PageHeader-wrapper"},r.a.createElement("div",{className:"PageHeader"},r.a.createElement(s.h,{size:"m"},"Patients"),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center"}},r.a.createElement(s.d,{appearance:"primary",onClick:function(){return x(!0)}},"Change Server")))),r.a.createElement("div",{className:"Search-wrapper"},r.a.createElement(s.j,{clearButton:!0,value:k,icon:"search",name:"input",placeholder:"Search",onChange:function(e){return $(e.target.value)},onClear:function(){return $("")}}),r.a.createElement("div",{style:{width:"150px"}},r.a.createElement(s.g,{options:[{label:"Male",value:"male"},{label:"Female",value:"female"}],placeholder:"Gender",onChange:function(e,a){J(e)}})),r.a.createElement(s.d,{appearance:"primary",onClick:function(){p(o,JSON.parse(h))({name:k,gender:H}).then((function(e){F(e.data)})).catch((function(e){console.log(e),R(!0),V("Something went wrong")}))}},"Search")),L?r.a.createElement(f,{text:_,icon:"error"}):T&&T.entry&&T.entry.length>0?r.a.createElement("div",{style:{height:"calc(100vh - 112px",overflowY:"scroll"}},r.a.createElement(g,{data:T,onClick:K})):void 0)},b=(t(426),t(427),{size:"6",sizeXL:"6",sizeM:"6"}),E=function(e){var a=e.data,t=void 0===a?{}:a,n=e.loading;return r.a.createElement(s.e,{shadow:"dark",style:{width:"600px",padding:"16px",backgroundColor:"white"}},n?r.a.createElement("div",null,r.a.createElement(s.q,{withImage:!0,round:!0,imageSize:"medium"},r.a.createElement(s.r,{length:"large"})),r.a.createElement("div",{className:"PatientInfo-loading"},r.a.createElement(s.q,null,r.a.createElement(s.r,{length:"medium"})))):r.a.createElement("div",null,r.a.createElement("div",{className:"PatientInfo-heading"},r.a.createElement(s.a,{appearance:"primary"},"".concat(t.name[0].given[0].charAt(0)).concat(t.name[0].family.charAt(0))),r.a.createElement(s.h,{size:"m"},"".concat(t.name[0].given[0],", ").concat(t.name[0].family)),r.a.createElement(s.b,{appearance:"secondary"},t.id)),r.a.createElement("div",{className:"PatientInfo-body"},r.a.createElement(s.s,null,r.a.createElement(s.f,b,r.a.createElement("div",{className:"PatientInfo-item"},r.a.createElement(s.t,{appearance:"default"},"DOB: "),r.a.createElement(s.t,{appearance:"subtle"},t.birthDate))),r.a.createElement(s.f,b,r.a.createElement("div",{className:"PatientInfo-item"},r.a.createElement(s.t,{appearance:"default"},"Gender: "),r.a.createElement(s.t,{appearance:"subtle"},t.gender)))),r.a.createElement(s.s,null,r.a.createElement(s.f,b,r.a.createElement("div",{className:"PatientInfo-item"},r.a.createElement(s.t,{appearance:"default"},"Marital Status: "),r.a.createElement(s.t,{appearance:"subtle"},t.maritalStatus?t.maritalStatus.text:"N/A"))),r.a.createElement(s.f,b,r.a.createElement("div",{className:"PatientInfo-item"},r.a.createElement(s.t,{appearance:"default"},"Contact: "),r.a.createElement(s.t,{appearance:"subtle"},t.telecom?t.telecom[0].value:"N/A")))))))},y=[{name:"name",displayName:"Name",width:200,resizable:!0},{name:"value",displayName:"Value",width:150,resizable:!0},{name:"issued",displayName:"Issued Date",width:150,resizable:!0}],S=function(e){var a=e.data,t=void 0===a?[]:a,n=e.loading,c=e.loinc,i=void 0===c?["29463-7","8302-2","39156-5","55284-4","85354-9"]:c,o=function(e){var a=[];return e.forEach((function(e){var t=e.code&&e.code.coding&&e.code.coding[0]?e.code.coding:"-";if("-"!==t&&t.some((function(e){var a=e.code?e.code:"-";return i.includes(a)}))){var n=t[0].display?t[0].display:"-",r=e.valueQuantity&&e.valueQuantity.value?"".concat(e.valueQuantity.value).slice(0,5):"-",c=e.valueQuantity&&e.valueQuantity.unit?e.valueQuantity.unit:"-",o="".concat(r," ").concat(c),l=e.issued?new Date(e.issued):"-",u="-"===l?"-":"".concat(l.getMonth()+1,"-").concat(l.getDate(),"-").concat(l.getFullYear());if(Array.isArray(e.component))e.component.forEach((function(e){var t=e.code&&e.code.coding&&e.code.coding[0]&&e.code.coding[0].display?e.code.coding[0].display:"-",n=e.valueQuantity&&e.valueQuantity.value?"".concat(e.valueQuantity.value).slice(0,5):"-",r=e.valueQuantity&&e.valueQuantity.unit?e.valueQuantity.unit:"-",c="".concat(n," ").concat(r),i={issued:u,name:t,value:c};a.push(i)}));else{var s={name:n,issued:u,value:o};a.push(s)}}})),a}(t),l=!n&&0===o.length;return r.a.createElement(s.u,{data:o,schema:y,error:l,loading:n})},O=t(97),j=t.n(O),N=t(179),w=[{name:"facility",displayName:"Facility Name",width:150,resizable:!0},{name:"lType",displayName:"Encounter Type",width:150,resizable:!0},{name:"provider",displayName:"Provider",width:150,resizable:!0},{name:"facilityTel",displayName:"Facility contact",width:150,resizable:!0},{name:"startDate",displayName:"Start Date",width:150,resizable:!0}],x=function(e){var a=e.data,t=void 0===a?[]:a,c=e.fhirServer,i=e.serverHeaders,o=e.loading,l=Object(n.useState)(!0),d=Object(u.a)(l,2),v=d[0],p=d[1],f=Object(n.useState)([]),g=Object(u.a)(f,2),h=g[0],b=g[1],E=Object(n.useState)(!1),y=Object(u.a)(E,2),S=y[0],O=y[1],x=function(e,a,t){return m.a.get("".concat(e,"/").concat(t),{headers:a})},z=function(){var e=Object(N.a)(j.a.mark((function e(a,t,n){var r,c,i,o,l,u,s,d,m,v,p,f,g,h,b,E,y,S,O,N,w,z,C,k,D;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],c=[],i=[],o=0;case 4:if(!(o<n.length)){e.next=46;break}if(l=n[o],u=l.participant&&l.participant.length>0?l.participant[0]:"-",s=u&&u.individual&&u.individual.reference?u.individual.reference:"",d=l.serviceProvider&&l.serviceProvider.reference?l.serviceProvider.reference:"",m="-",v="-",p=l.type&&l.type.length>0?l.type[0]:"-",f=p&&p.text?p.text:"-",g=l.period&&l.period.start?l.period.start:"-",h="-"===g?"-":new Date(g),b="-"===h?"-":"".concat(h.getMonth()+1,"-").concat(h.getDate(),"-").concat(h.getFullYear()),E=r.indexOf(s),y=c.indexOf(d),""===s||-1!==E){e.next=29;break}return e.next=21,x(a,t,s);case 21:S=e.sent,O=S.data.name&&S.data.name[0]&&S.data.name[0].given&&S.data.name[0].given[0]?S.data.name[0].given[0]:" ",N=S.data.name&&S.data.name[0]&&S.data.name[0].family?S.data.name[0].family:" ",w="".concat(O,", ").concat(N),r.push(s),r.push(w),e.next=30;break;case 29:""!==s&&-1!==E&&(m=r[E+1]);case 30:if(""===d||-1!==y){e.next=40;break}return e.next=33,x(a,t,d);case 33:z=e.sent,C=z.data.name?z.data.name:"-",k=z.data.telecom&&z.data.telecom[0]&&z.data.telecom[0].value?z.data.telecom[0].value:"-",c.push(d),c.push([C,k]),e.next=41;break;case 40:""!==d&&-1!==y&&(v=c[y+1]);case 41:D={lType:f,provider:m,startDate:b,facility:v[0],facilityTel:v[1]},i.push(D);case 43:o++,e.next=4;break;case 46:return e.abrupt("return",i);case 47:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){p(!0),z(c,i,t).then((function(e){b(e),p(!1),!e||0!==e.length||o||v||O(!0)}))}),[h.length,o]),r.a.createElement(s.u,{data:h,error:S,loading:o||v,schema:w})},z=[{name:"codeText",displayName:"Condition Name",width:150,resizable:!0},{name:"severity",displayName:"Severity",width:150,resizable:!0},{name:"verificationStatus",displayName:"Status",width:150,resizable:!0},{name:"recordedDate",displayName:"Recorded Date",width:150,resizable:!0}],C=function(e){var a=e.data,t=void 0===a?[]:a,n=e.loading,c=function(e){for(var a=[],t=0;t<e.length;t++){var n=e[t],r=n.verificationStatus&&n.verificationStatus.coding&&n.verificationStatus.coding[0]&&n.verificationStatus.coding[0].code?n.verificationStatus.coding[0].code:"-",c=n.severity&&n.severity.coding&&n.severity.coding[0]&&n.severity.coding[0].display?n.severity.coding[0].display:"-",i=n.code&&n.code.coding&&n.code.coding[0]&&n.code.coding[0].display?n.code.coding[0].display:"-",o=n.recordedDate?new Date(n.recordedDate):"-",l={codeText:i,recordedDate:"-"===o?"-":"".concat(o.getMonth()+1,"-").concat(o.getDate(),"-").concat(o.getFullYear()),verificationStatus:r.toUpperCase(),severity:c.toUpperCase()};a.push(l)}return a}(t),i=!n&&0===c.length;return r.a.createElement(s.u,{data:c,error:i,loading:n,schema:z})},k=[{name:"occurenceDate",displayName:"Date",width:150,resizable:!0},{name:"vaccine",displayName:"Vaccine",width:250,resizable:!0},{name:"status",displayName:"Status",width:150,resizable:!0}],D=function(e){var a=e.data,t=void 0===a?[]:a,n=e.loading,c=function(e){for(var a=[],t=0;t<e.length;t++){var n=e[t],r=n.occurrenceDateTime?new Date(n.occurrenceDateTime):"-",c={occurenceDate:"-"===r?"-":"".concat(r.getMonth()+1,"-").concat(r.getDate(),"-").concat(r.getFullYear()),vaccine:n.vaccineCode&&n.vaccineCode.coding[0]&&n.vaccineCode.coding[0].display?n.vaccineCode.coding[0].display:"-",status:n.status?n.status.toUpperCase():"-"};a.push(c)}return a}(t),i=!n&&0===c.length;return r.a.createElement(s.u,{data:c,error:i,loading:n,schema:k})},I=function(){var e=Object(l.f)(),a=Object(l.g)().id,t=function(){var e=localStorage.getItem("fhirServer");return e||""},c=function(){var e=localStorage.getItem("serverHeaders");return e||"{}"},i=Object(n.useState)(t()),o=Object(u.a)(i,2),d=o[0],v=o[1],p=Object(n.useState)(c()),g=Object(u.a)(p,2),h=g[0],b=g[1],y=Object(n.useState)(null),O=Object(u.a)(y,2),j=O[0],N=O[1],w=Object(n.useState)([]),z=Object(u.a)(w,2),k=z[0],I=z[1],P=Object(n.useState)([]),H=Object(u.a)(P,2),J=H[0],Q=H[1],A=Object(n.useState)([]),T=Object(u.a)(A,2),F=T[0],M=T[1],B=Object(n.useState)([]),L=Object(u.a)(B,2),R=L[0],U=L[1],Y=Object(n.useState)(!1),_=Object(u.a)(Y,2),V=_[0],G=_[1],W=Object(n.useState)(!0),q=Object(u.a)(W,2),X=q[0],$=q[1],K=Object(n.useState)(!0),Z=Object(u.a)(K,2),ee=Z[0],ae=Z[1],te=Object(n.useState)(!0),ne=Object(u.a)(te,2),re=ne[0],ce=ne[1],ie=Object(n.useState)(!0),oe=Object(u.a)(ie,2),le=oe[0],ue=oe[1],se=Object(n.useState)(!0),de=Object(u.a)(se,2),me=de[0],ve=de[1];Object(n.useEffect)((function(){v(t()),b(c()),t()?(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t){return m.a.get("".concat(e,"/Patient/").concat(t),{headers:a})}}(d,JSON.parse(h))(a).then((function(e){N(e.data),$(!1)})).catch((function(e){console.log(e),G(!0)})),function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t){return m.a.get("".concat(e,"/Observation?patient=").concat(t,"&category=vital-signs"),{headers:a})}}(d,JSON.parse(h))(a).then((function(e){var a=e.data.entry.map((function(e){return e.resource}));I(a),ae(!1)})).catch((function(e){console.log(e),G(!0)})),function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t){return m.a.get("".concat(e,"/Encounter?patient=").concat(t),{headers:a})}}(d,JSON.parse(h))(a).then((function(e){var a=e.data&&e.data.entry?e.data.entry.map((function(e){return e.resource})):[];Q(a),ce(!1)})).catch((function(e){console.log(e),G(!0)})),function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t){return m.a.get("".concat(e,"/Condition?patient=").concat(t),{headers:a})}}(d,JSON.parse(h))(a).then((function(e){var a=e.data.entry.map((function(e){return e.resource}));M(a),ue(!1)})).catch((function(e){console.log(e),G(!0)})),function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t){return m.a.get("".concat(e,"/Immunization?patient=").concat(t),{headers:a})}}(d,JSON.parse(h))(a).then((function(e){var a=e.data.entry.map((function(e){return e.resource}));U(a),ve(!1)})).catch((function(e){console.log(e),G(!0)}))):e.push("/")}),[localStorage.getItem("fhirServer")]);var pe={title:"Patient Summary",breadcrumb:r.a.createElement(s.c,{list:[{label:"Home",link:"/"}],onClick:function(a){return e.push(a)}})};return V?r.a.createElement(f,{text:"Something went wrong",icon:"error"}):r.a.createElement("div",{className:"Summary"},r.a.createElement(s.p,pe),r.a.createElement("div",{className:"Summary-body"},r.a.createElement(E,{data:j,loading:X}),r.a.createElement("div",{className:"Summary-table"},r.a.createElement("div",{className:"Summary-table-heading"},r.a.createElement(s.i,{size:"23",name:"add_box"}),r.a.createElement(s.t,null,"Vitals")),r.a.createElement(S,{data:k,loading:ee})),r.a.createElement("div",{className:"Summary-table"},r.a.createElement("div",{className:"Summary-table-heading"},r.a.createElement(s.i,{size:"23",name:"emoji_people"}),r.a.createElement(s.t,null,"Encounters")),r.a.createElement(x,{fhirServer:d,serverHeaders:JSON.parse(h),data:J,loading:re})),r.a.createElement("div",{className:"Summary-table"},r.a.createElement("div",{className:"Summary-table-heading"},r.a.createElement(s.i,{size:"23",name:"check_box"}),r.a.createElement(s.t,null,"Condition")),r.a.createElement(C,{data:F,loading:le})),r.a.createElement("div",{className:"Summary-table"},r.a.createElement("div",{className:"Summary-table-heading"},r.a.createElement(s.i,{size:"23",name:"event_note"}),r.a.createElement(s.t,null,"Immunization")),r.a.createElement(D,{data:R,loading:me}))))};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{basename:"/carefhir"},r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/"},r.a.createElement(h,null)),r.a.createElement(l.a,{path:"/patients/:id",exact:!0},r.a.createElement(I,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[207,1,2]]]);
//# sourceMappingURL=main.7ed12b30.chunk.js.map